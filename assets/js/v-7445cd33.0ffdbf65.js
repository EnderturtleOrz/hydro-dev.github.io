"use strict";(self.webpackChunkhydro_dev_github_io=self.webpackChunkhydro_dev_github_io||[]).push([[2368],{7402:(t,e,n)=>{n.r(e),n.d(e,{data:()=>a});const a=JSON.parse('{"key":"v-7445cd33","path":"/dev/","title":"开发环境部署","lang":"en-US","frontmatter":{"description":"开发环境仅适合需要进行大量深度修改或希望贡献代码的用户。 如果您没有过 TypeScript 项目的开发经验，非常不建议自建开发环境，请基于插件系统进行你所需要的功能添加与修改。 使用自动脚本安装也可以基于插件系统完成大部分的定制需求（参照左侧【使用 TypeScript 编写插件】章节）。 如果您需要编译 UI，请确认您的开发环境至少拥有 8GB 内...","head":[["meta",{"property":"og:url","content":"https://hydro.js.org/dev/"}],["meta",{"property":"og:site_name","content":"Hydro"}],["meta",{"property":"og:title","content":"开发环境部署"}],["meta",{"property":"og:description","content":"开发环境仅适合需要进行大量深度修改或希望贡献代码的用户。 如果您没有过 TypeScript 项目的开发经验，非常不建议自建开发环境，请基于插件系统进行你所需要的功能添加与修改。 使用自动脚本安装也可以基于插件系统完成大部分的定制需求（参照左侧【使用 TypeScript 编写插件】章节）。 如果您需要编译 UI，请确认您的开发环境至少拥有 8GB 内..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-07-23T09:45:08.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-23T09:45:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"开发环境部署\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-23T09:45:08.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"安装依赖","slug":"安装依赖","link":"#安装依赖","children":[]},{"level":2,"title":"安装 Hydro","slug":"安装-hydro","link":"#安装-hydro","children":[]},{"level":2,"title":"插件","slug":"插件","link":"#插件","children":[]},{"level":2,"title":"启动 Hydro","slug":"启动-hydro","link":"#启动-hydro","children":[]},{"level":2,"title":"更新","slug":"更新","link":"#更新","children":[]}],"git":{"createdTime":1611599229000,"updatedTime":1721727908000,"contributors":[{"name":"undefined","email":"i@undefined.moe","commits":16},{"name":"Macesuted Kysic","email":"macesuted@foxmail.com","commits":5},{"name":"Macesuted","email":"macesuted@qq.com","commits":3},{"name":"(Macesuted)","email":"macesuted@foxmail.com","commits":2},{"name":"panda","email":"panda_dtdyy@outlook.com","commits":2},{"name":"(Macesuted)","email":"1912192337@qq.com","commits":1}]},"readingTime":{"minutes":2.93,"words":878},"filePathRelative":"dev/README.md","localizedDate":"January 25, 2021","autoDesc":true,"excerpt":""}')},2121:(t,e,n)=>{n.r(e),n.d(e,{default:()=>y});var a=n(6252);const l=(0,a.uE)('<h1 id="开发环境部署" tabindex="-1"><a class="header-anchor" href="#开发环境部署"><span>开发环境部署</span></a></h1><p>开发环境仅适合需要进行大量深度修改或希望贡献代码的用户。<br> 如果您没有过 TypeScript 项目的开发经验，非常不建议自建开发环境，请基于插件系统进行你所需要的功能添加与修改。<br> 使用自动脚本安装也可以基于插件系统完成大部分的定制需求（参照左侧【使用 TypeScript 编写插件】章节）。<br> 如果您需要编译 UI，请确认您的开发环境至少拥有 8GB 内存。</p><table><thead><tr><th style="text-align:center;">功能对比</th><th style="text-align:center;">生产模式</th><th style="text-align:center;">开发模式</th></tr></thead><tbody><tr><td style="text-align:center;">快速起步</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr><tr><td style="text-align:center;">插件 API</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">底层代码修改</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">热重载</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">性能优化</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr><tr><td style="text-align:center;">兼容性</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr><tr><td style="text-align:center;">技术支持</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr><tr><td style="text-align:center;">部署难度</td><td style="text-align:center;">简单</td><td style="text-align:center;">复杂</td></tr><tr><td style="text-align:center;">升级</td><td style="text-align:center;">简单</td><td style="text-align:center;">复杂</td></tr><tr><td style="text-align:center;">技能要求</td><td style="text-align:center;">低</td><td style="text-align:center;">高</td></tr><tr><td style="text-align:center;">空闲内存要求</td><td style="text-align:center;">2G</td><td style="text-align:center;">8G</td></tr><tr><td style="text-align:center;">可切换至开发模式</td><td style="text-align:center;">是</td><td style="text-align:center;">=</td></tr><tr><td style="text-align:center;">可切换至生产模式</td><td style="text-align:center;">=</td><td style="text-align:center;">需重写代码</td></tr></tbody></table><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>使用开发环境默认您有良好的国际互联网连接。以下报错信息均为网络问题导致，您可以尝试换源/使用代理/切换网络环境。</p><ul><li>Failed to connect</li><li>Connection reset</li><li>connect timeout</li></ul><p>开发组不会为您解决任何网络问题。</p></div><p>在开发之前，请务必确认您使用了支持 TypeScript 的 IDE 环境，这可以极大降低开发难度。</p><h2 id="安装依赖" tabindex="-1"><a class="header-anchor" href="#安装依赖"><span>安装依赖</span></a></h2>',6),s=(0,a._)("li",null,"系统要求：Hydro开发环境目前仅支持 Linux 系统，如您使用 Windows 请使用 WSL2 。",-1),d={href:"https://www.mongodb.com/try/download/community",target:"_blank",rel:"noopener noreferrer"},r=(0,a._)("li",null,[(0,a.Uk)("NodeJS：请安装 NodeJS >=18 版本。（若使用 apt 请使用 nodesource 提供的源替代官方源） （推荐使用 nix ，可通过"),(0,a._)("code",null,". <(curl https://hydro.ac/nix.sh)"),(0,a.Uk)(" 快速安装）")],-1),o=(0,a._)("li",null,[(0,a.Uk)("yarn：安装 yarn 前请先完成 NodeJS 安装。 "),(0,a._)("code",null,"nix-env -iA nixpkgs.yarn"),(0,a.Uk)(" 或 "),(0,a._)("code",null,"npm install -g yarn")],-1),i=(0,a._)("li",null,"若需要使用 hydrojudge 请参照 hydrojudge 插件说明部分完成沙箱的安装配置。",-1),c=(0,a.uE)('<h2 id="安装-hydro" tabindex="-1"><a class="header-anchor" href="#安装-hydro"><span>安装 Hydro</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki nord" style="background-color:#2e3440ff;" tabindex="0"><code><span class="line"><span style="color:#88C0D0;">git</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">clone</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">https://github.com/hydro-dev/Hydro.git</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">/root/Hydro</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">--recursive</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;"># 下载至 /root/Hydro 文件夹</span></span>\n<span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">/root/Hydro</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;"># 进入工作目录</span></span>\n<span class="line"><span style="color:#88C0D0;">yarn</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;"># 安装依赖包</span></span>\n<span class="line"><span style="color:#88C0D0;">yarn</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">build:ui:production</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;"># 编译前端</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插件" tabindex="-1"><a class="header-anchor" href="#插件"><span>插件</span></a></h2><p>开发环境部署完成后默认不启用任何插件。</p><p>所有官方插件均随源码仓库下载到安装文件夹的 <code>packages</code> 子文件夹下，可以通过下面的命令启用官方插件（以启用 <code>@hydrooj/ui-default</code> 为例）：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki nord" style="background-color:#2e3440ff;" tabindex="0"><code><span class="line"><span style="color:#88C0D0;">yarn</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">hydrooj</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">addon</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">add</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">@hydrooj/ui-default</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对于非官方插件，下载后通过下面的命令启用即可（以启用位置在 <code>/root/addon</code> 下的插件为例）：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki nord" style="background-color:#2e3440ff;" tabindex="0"><code><span class="line"><span style="color:#88C0D0;">yarn</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">hydrooj</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">addon</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">add</span><span style="color:#D8DEE9FF;"> </span><span style="color:#A3BE8C;">/root/addon</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="启动-hydro" tabindex="-1"><a class="header-anchor" href="#启动-hydro"><span>启动 Hydro</span></a></h2><p>支持如下启动参数：</p><ul><li><code>--port=2333</code> 指定启动端口</li><li><code>--debug</code> 启用开发模式</li><li><code>--watch</code> 启用热重载（实验性）</li></ul><p>使用 <code>yarn debug --port=2333 --watch</code> 启动 Hydro，并在后台运行 <code>yarn build:ui:dev</code>，可以对前端源码进行实时转译，在反复修改时可节省编译时间。启动完成后，您可以在 8000 端口访问到 Hydro 实例，且前端的任何更改将即时生效。（后端热重载可能存在 bug，部分模块修改后可能仍需重启才能生效）<br> 请注意：此功能仅在启用了 <code>@hydrooj/ui-default</code> 插件的情况下才会生效。</p><p>首次启动会要求您填写数据库连接信息。请根据您数据库的安装填写（若无密码则留空）<br> 请按照下文说明创建管理员账户即可正常使用。</p><h2 id="更新" tabindex="-1"><a class="header-anchor" href="#更新"><span>更新</span></a></h2><p>需要更新的时候进入对应仓库文件夹执行 <code>git pull</code>，然后重新 <code>yarn &amp;&amp; yarn build:ui:production</code> 即可。</p>',15),p={},y=(0,n(3744).Z)(p,[["render",function(t,e){const n=(0,a.up)("ExternalLinkIcon");return(0,a.wg)(),(0,a.iD)("div",null,[l,(0,a._)("ul",null,[s,(0,a._)("li",null,[(0,a.Uk)("MongoDB：Hydro 需要 "),(0,a._)("a",d,[(0,a.Uk)("MongoDB"),(0,a.Wm)(n)]),(0,a.Uk)(" 提供数据库服务。")]),r,o,i]),c])}]])},3744:(t,e)=>{e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[t,a]of e)n[t]=a;return n}}}]);